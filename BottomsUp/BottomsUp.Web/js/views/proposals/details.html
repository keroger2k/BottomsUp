


<div class="content-wrapper">
    <!-- Content Header (Page header) -->
    <section class="content-header">
        <h1>
            {{ proposal.name }} <small class="pull-right">Modified By: {{ proposal.modifiedBy | date: 'medium' }}</small>
            <small>({{proposal.id }})</small>
        </h1>
    </section>

    <!-- Main content -->
    <section class="content">

        <!-- Default box -->
        <div class="box" style="min-height:200px;">
            <div class="box-header with-border">
                <h3 class="box-title">Requirements</h3>
                <span class="pull-right"><a href="javascript::;" class="btn btn-sm btn-info btn-flat pull-left">New Requirement</a></span>
            </div>
            <div class="box-body">
                <table class="table table-striped table-bordered table-condensed table-hover">
                    <tr>
                        <th style="width:100px;">PWS Number</thstyle>
                        <th style="width:100px;">Category</th>
                        <th>Description</th>
                        <th style="width:100px;">Total Hours</th>
                        <th style="width:200px;">Modified By</th>
                        <th style="width:200px;">Updated</th>
                        <th style="width:100px;">&nbsp;</th>
                    </tr>
                    <tr ng-repeat="r in proposal.requirements | orderBy:'id':true" ng-click="requirementSelected(r)">
                        <td>{{ r.pwsNumber }}</td>
                        <td>{{ r.category.name }}</td>
                        <td>{{ r.description }}</td>
                        <td>{{ r.totalHours }}</td>
                        <td>{{ r.modifiedBy }}</td>
                        <td>{{ r.updated | date:'medium'}}</td>
                        <td>
                            <button title="Edit" class="btn btn-sm btn-info">
                                <em class="fa fa-pencil"></em>
                            </button>
                            <button title="Delete" class="btn btn-sm btn-danger">
                                <em class="fa fa-trash"></em>
                            </button>
                        </td>
                    </tr>
                </table>
            </div><!-- /.box-body -->
        </div><!-- /.box -->
        <div class="box" style="min-height:200px;"ng-controller="taskViewController as taskView">
            <div class="box-header with-border">
                <h3 class="box-title">Tasks</h3>
                <span class="pull-right"><a href="javascript::;" class="btn btn-sm btn-info btn-flat pull-left">New Task</a></span>
            </div>
            <div class="box-body">
                <table class="table table-striped table-bordered table-condensed table-hover">
                    <thead>
                        <tr>
                            <th>Labor Category</th>
                            <th style="width:400px;">Description</th>
                            <th style="width:200px;">Modified By</th>
                            <th style="width:200px;">Updated</th>
                            <th style="width:100px;">&nbsp;</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="t in selectedRequirement.tasks | orderBy:'id':true">
                            <td>{{ t.labor.name }}</td>
                            <td>{{ t.description }}</td>
                            <td>{{ t.modifiedBy }}</td>
                            <td>{{ t.updated | date:'medium'}}</td>
                            <td>
                                <div ng-show="t.editMode == null || t.editMode == false">
                                    <button title="Edit" class="btn btn-sm btn-info" ng-click="toggleEditMode(t)">
                                        <em class="fa fa-pencil"></em>
                                    </button>
                                    <button title="Delete" class="btn btn-sm btn-danger" ng-click="deleteTask(t)">
                                        <em class="fa fa-trash"></em>
                                    </button>
                                </div>

                                <div ng-show="t.editMode == true">
                                    <button title="Save" class="btn btn-sm btn-info" ng-click="updateTask(t)">
                                        <em class="fa fa-save"></em>
                                    </button>
                                    <button title="Cancel" class="btn btn-sm btn-default" ng-click="toggleEditMode(t)">
                                        <em class="fa fa-reply"></em>
                                    </button>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
                </tbody>
            </div><!-- /.box-body -->
        </div><!-- /.box -->

    </section><!-- /.content -->
</div><!-- /.content-wrapper -->
